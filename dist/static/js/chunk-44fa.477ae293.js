(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-44fa"],{"4AVS":function(e,t,a){"use strict";var l=a("Sl2t");a.n(l).a},DaIU:function(e,t,a){"use strict";a.r(t);var l=a("jNkO"),o=a("oU4k"),s={name:"GoodsRepoAdd",components:{CateCasecader:l.a},data:function(){return{prodRepoAddMapApi:{add:o.a},activeNames:[["1"],["1"],["1"],["1"]],form:{prodName:"",prodNo:"",price:0,marketPrice:0,weight:0,unit:"g",forSale:!1,selectedBrand:null,uploadFile:null,uploadFileThumb:null,uploadFileInstance:null,imageUrl:"",fileName:""},preSetData:{brandList:[{value:"0",label:"尤妮佳"},{value:"1",label:"香奈儿"},{value:"2",label:"SKII"},{value:"3",label:"华为"},{value:"4",label:"海尔"}]}}},methods:{uploadPic:function(e){console.log(e);var t=document.getElementById(e).files,a=new FileReader,l=this;a.readAsDataURL(t[0]),a.onload=function(e){l.form.imageUrl=this.result},0!==t.length&&(this.form.uploadFileInstance=t[0],this.form.fileName=t[0].name)},addProdToRepo:function(){var e=this.$store.state.user.selectedCateArr,t=new FormData;t.append("title",this.form.prodName),t.append("type",e[e.length-1]),t.append("price",this.form.price),t.append("pointRate",0),t.append("detail",0),this.form.uploadFileInstance&&t.append("titleImage",this.form.uploadFileInstance),this.prodRepoAddMapApi.add(t)}}},i=(a("mCSu"),a("KHd+")),r=Object(i.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"contentwrapper"},[a("el-main",[a("div",[a("h3",{staticClass:"heading"},[e._v("添加商品库商品\n        "),a("span",{staticStyle:{float:"right","margin-top":"-3px"}},[a("router-link",{attrs:{to:"/goodsRepo/list"}},[a("el-button",{attrs:{type:"default",size:"mini"}},[a("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),e._v("\n              返回商品列表\n            ")],1)],1)],1)])]),e._v(" "),a("el-form",{ref:"commonInfoForm",staticClass:"commonForm",attrs:{model:e.form,"label-position":"left","label-width":"100px;"}},[a("el-container",[a("el-main",{staticStyle:{padding:"20px"}},[a("el-form-item",{attrs:{label:"商品名称："}},[a("el-input",{model:{value:e.form.prodName,callback:function(t){e.$set(e.form,"prodName",t)},expression:"form.prodName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品货号："}},[a("el-input",{model:{value:e.form.prodNo,callback:function(t){e.$set(e.form,"prodNo",t)},expression:"form.prodNo"}}),e._v(" "),a("small",[e._v("\n              如果您不输入商品货号，系统将自动生成一个唯一的货号。\n            ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"本店售价："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),a("el-button",{staticClass:"inline-block right-beside-btn",attrs:{type:"default"}},[e._v("按市场价计算")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"市场售价："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{model:{value:e.form.marketPrice,callback:function(t){e.$set(e.form,"marketPrice",t)},expression:"form.marketPrice"}}),e._v(" "),a("el-button",{staticClass:"inline-block right-beside-btn",attrs:{type:"default"}},[e._v("取整数")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"商品重量："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticClass:"input-with-select",model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),e._v(" "),a("el-select",{staticClass:"right-beside-btn",attrs:{slot:"append",placeholder:"请选择单位"},slot:"append",model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},[a("el-option",{attrs:{label:"克",value:"g"}}),e._v(" "),a("el-option",{attrs:{label:"千克",value:"kg"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"上架："}},[a("el-checkbox",{model:{value:e.form.forSale,callback:function(t){e.$set(e.form,"forSale",t)},expression:"form.forSale"}},[e._v("\n              打勾表示商家可见此商品，并允许商家将此商品导入店铺，否则不显示并不可导入\n            ")])],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[0],callback:function(t){e.$set(e.activeNames,0,t)},expression:"activeNames[0]"}},[a("el-collapse-item",{attrs:{title:"SEO优化",name:"1"}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{model:{value:e.form.seoKeywords,callback:function(t){e.$set(e.form,"seoKeywords",t)},expression:"form.seoKeywords"}}),e._v(" "),a("small",[e._v("用英文逗号分隔")])],1),e._v(" "),a("el-form-item",{attrs:{label:"简单描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.seoDescrib,callback:function(t){e.$set(e.form,"seoDescrib",t)},expression:"form.seoDescrib"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addProdToRepo}},[e._v("下一步")])],1)],1),e._v(" "),a("el-aside",{staticStyle:{width:"350px"}},[a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[1],callback:function(t){e.$set(e.activeNames,1,t)},expression:"activeNames[1]"}},[a("el-collapse-item",{attrs:{title:"商品分类",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"选择商品分类"}},[a("cate-casecader")],1)],1)],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[2],callback:function(t){e.$set(e.activeNames,2,t)},expression:"activeNames[2]"}},[a("el-collapse-item",{attrs:{title:"商品品牌",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"选择商品品牌"}},[a("el-select",{attrs:{placeholder:"请选择..."},model:{value:e.form.selectedBrand,callback:function(t){e.$set(e.form,"selectedBrand",t)},expression:"form.selectedBrand"}},e._l(e.preSetData.brandList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[3],callback:function(t){e.$set(e.activeNames,3,t)},expression:"activeNames[3]"}},[a("el-collapse-item",{attrs:{title:"商品图片",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"上传商品图片"}},[a("div",{staticClass:"upload-pic-wrap"},[a("el-input",{staticStyle:{position:"absolute","z-index":"11",opacity:"0",width:"100%",height:"100%",cursor:"pointer"},attrs:{id:"createFile",type:"file"},on:{change:function(t){e.uploadPic("createFile")}},model:{value:e.form.uploadFile,callback:function(t){e.$set(e.form,"uploadFile",t)},expression:"form.uploadFile"}}),e._v(" "),e.form.imageUrl?e._e():a("span",{staticClass:"add-icon"},[a("font-awesome-icon",{staticStyle:{"font-size":"45px","margin-top":"17px"},attrs:{icon:["fas","plus"]}})],1),e._v(" "),e.form.imageUrl?a("img",{attrs:{src:e.form.imageUrl}}):e._e()],1)]),e._v(" "),e.form.imageUrl?a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"商品缩略图"}},[a("div",{staticClass:"upload-pic-wrap",staticStyle:{width:"80px",height:"80px"}},[a("el-input",{staticStyle:{position:"absolute","z-index":"11",opacity:"0",width:"100%",height:"100%",cursor:"pointer"},attrs:{id:"createFileThumb",type:"file"},on:{change:function(t){e.uploadPic("createFileThumb")}},model:{value:e.form.uploadFileThumb,callback:function(t){e.$set(e.form,"uploadFileThumb",t)},expression:"form.uploadFileThumb"}}),e._v(" "),e.form.imageUrl?a("img",{attrs:{src:e.form.imageUrl}}):e._e()],1)]):e._e(),e._v(" "),a("small",[e._v("点击更换商品图片或商品缩略图")])],1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="goods-repo-add.vue";t.default=r.exports},Sl2t:function(e,t,a){},jNkO:function(e,t,a){"use strict";var l=a("oU4k"),o={name:"CateCasecader",props:{size:{type:String,default:"medium"},placeholder:{type:String,default:"请选择"}},data:function(){return{firstClass:[],props:{value:"id",children:"children",label:"name"},cateCasecaderMapApi:{firstClass:l.g,secondClass:l.f}}},mounted:function(){var e=this;console.log(this.size),this.cateCasecaderMapApi.firstClass({classScheme:"cat1"}).then(function(t){if(console.log(t),200===t.status){var a=[];t.data.forEach(function(e){a.push({id:e.id,name:e.name,children:[]})}),e.firstClass=a}})},methods:{handleItemChange:function(e){var t=this;this.$store.commit("SET_SEL_CATE_ARR",e),this.cateCasecaderMapApi.secondClass({topClass:e}).then(function(e){200===e.status&&e.data.forEach(function(e){t.firstClass.forEach(function(t){e.pid===t.id&&t.children.push({id:e.id,name:e.name,children:null})})})})}}},s=(a("4AVS"),a("KHd+")),i=Object(s.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{},[t("el-cascader",{attrs:{options:this.firstClass,props:this.props,size:this.size,placeholder:this.placeholder},on:{"active-item-change":this.handleItemChange}})],1)},[],!1,null,null,null);i.options.__file="index.vue";t.a=i.exports},mCSu:function(e,t,a){"use strict";var l=a("pdph");a.n(l).a},oU4k:function(e,t,a){"use strict";a.d(t,"e",function(){return o}),a.d(t,"g",function(){return s}),a.d(t,"f",function(){return i}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return n}),a.d(t,"h",function(){return c}),a.d(t,"j",function(){return m}),a.d(t,"d",function(){return d}),a.d(t,"b",function(){return u}),a.d(t,"i",function(){return p});var l=a("t3Un");function o(e){return Object(l.b)({url:"/v1/api/goods/list",method:"post",data:e})}function s(e){return Object(l.b)({url:"/v1/api/goods/topClass",method:"post",data:e})}function i(e){return Object(l.b)({url:"/v1/api/goods/secondClass",method:"post",data:e})}function r(e){return Object(l.b)({url:"/v1/api/goods/add",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function n(e){return Object(l.b)({url:"/v1/api/goods/recycle/list",method:"post",data:e})}function c(e){return Object(l.b)({url:"/v1/api/goods/del",method:"post",data:{ids:e}})}function m(e){return Object(l.b)({url:"/v1/api/user/images/upload",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function d(){return Object(l.b)({url:"/v1/api/user/images/myImages",method:"post"})}function u(e){return Object(l.b)({url:"/v1/api/goods/recycle/clear",method:"post",data:{ids:e}})}function p(e){return Object(l.b)({url:"/v1/api/goods/recycle/recover",method:"post",data:{ids:e}})}},pdph:function(e,t,a){}}]);