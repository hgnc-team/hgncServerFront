(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-42ae"],{"2r6p":function(t,e,a){"use strict";var s=a("5IS3");a.n(s).a},"5IS3":function(t,e,a){},"6jsm":function(t,e,a){},HGfo:function(t,e,a){"use strict";var s=a("oU4k"),o=a("LvDl"),r=a.n(o),i={name:"GoodsTableCustomTd",props:{type:{type:String,default:"text"},linkColor:{type:String,default:"normal"},data:{type:Object,default:null},currentId:{type:String,default:""},isRowMenuWrapCell:{type:Boolean,default:!1},prop:{type:String,default:""},name:{type:String,default:""}},data:function(){return{goodOperMapApi:{fakeDel:s.h},formModel:{},copyData:r.a.clone(this.data),preList:{reviewStatusList:[{value:"-1",label:"请选择审核状态"},{value:"0",label:"未审核"},{value:"1",label:"审核未通过"},{value:"2",label:"已审核"},{value:"3",label:"无需审核"}]}}},methods:{resetData:function(){},fakeDel:function(t){var e=this;this.$confirm("您确定把该商品放入回收站吗？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.goodOperMapApi.fakeDel([t.id]).then(function(t){console.log(t),200===t.status&&(e.$message({type:"success",message:"删除成功，已移入回收站"}),e.$root.eventHub.$emit("refreshGoodsListEvent"))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},n=(a("2r6p"),a("KHd+")),l=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["image"===t.type?a("span",{staticClass:"thumb-img-wrap"},[a("el-popover",{attrs:{placement:"right","popper-class":"editablePopper",trigger:"click"}},[a("img",{staticStyle:{width:"180px",height:"180px","z-index":"11"},attrs:{src:t.data.thumb}}),t._v(" "),a("span",{staticClass:"editable-click cursor_pointer",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{src:t.data.thumb}})])])],1):"input"===t.type?a("span",[a("el-popover",{attrs:{placement:"top","popper-class":"editablePopper",trigger:"click"},on:{hide:t.resetData}},[a("div",{staticClass:"editable-container"},[a("h3",{staticClass:"popover-title"},[t._v("请输入"+t._s(t.name))]),t._v(" "),a("div",{staticClass:"popover-content"},[a("el-form",{staticClass:"editable-form-inline",attrs:{inline:!0,model:t.data}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.data[t.prop],callback:function(e){t.$set(t.data,t.prop,e)},expression:"data[prop]"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("确定")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"default",size:"mini"}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("span",{staticClass:"editable-click cursor_pointer",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.data[t.prop]))])]),t._v(" "),a("br"),t._v(" "),t.isRowMenuWrapCell&&t.data.id===t.currentId?a("span",[a("ul",{staticClass:"goodsOpMenu"},[a("li",[a("router-link",{attrs:{to:"/goodsManage/index/prodEdit"}},[t._v("编辑")])],1),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("li",[a("a",{staticClass:"py-text-danger",attrs:{href:"jvascript:void(0)"},on:{click:function(e){t.fakeDel(t.data)}}},[t._v("删除")])])])]):t._e()],1):"switch"===t.type?a("span",[a("el-form",{attrs:{inline:!0,model:t.data}},[a("el-switch",{model:{value:t.data[t.prop],callback:function(e){t.$set(t.data,t.prop,e)},expression:"data[prop]"}})],1)],1):"text"===t.type?a("span",[a("span",{class:{"py-text-danger":"danger"===t.linkColor}},[t._v(t._s(t.data[t.prop]))])]):"select"===t.type?a("span",[a("el-popover",{attrs:{placement:"top","popper-class":"editablePopper",trigger:"click"},on:{hide:t.resetData}},[a("div",{staticClass:"editable-container"},[a("h3",{staticClass:"popover-title"},[t._v("请输入"+t._s(t.name))]),t._v(" "),a("div",{staticClass:"popover-content"},[a("el-form",{staticClass:"editable-form-inline",attrs:{inline:!0,model:t.data}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择审核状态","value-key":"value"},model:{value:t.data.reviewStatus,callback:function(e){t.$set(t.data,"reviewStatus",e)},expression:"data.reviewStatus"}},t._l(t.preList.reviewStatusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("确定")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"default",size:"mini"}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("span",{staticClass:"editable-click cursor_pointer",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.data[t.prop]))])])],1):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"jvascript:void(0)"}},[this._v("商品属性")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"jvascript:void(0)"}},[this._v("商品相册")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"jvascript:void(0)"}},[this._v("关联商品")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"jvascript:void(0)"}},[this._v("关联文章")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"jvascript:void(0)"}},[this._v("预览")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"jvascript:void(0)"}},[this._v("导入商品库")])])}],!1,null,"0772f14c",null);l.options.__file="goodsTableCustomTd.vue";e.a=l.exports},Opjo:function(t,e,a){"use strict";var s=a("6jsm");a.n(s).a},oU4k:function(t,e,a){"use strict";a.d(e,"e",function(){return o}),a.d(e,"g",function(){return r}),a.d(e,"f",function(){return i}),a.d(e,"a",function(){return n}),a.d(e,"c",function(){return l}),a.d(e,"h",function(){return c}),a.d(e,"j",function(){return p}),a.d(e,"d",function(){return u}),a.d(e,"b",function(){return d}),a.d(e,"i",function(){return f});var s=a("t3Un");function o(t){return Object(s.b)({url:"/v1/api/goods/list",method:"post",data:t})}function r(t){return Object(s.b)({url:"/v1/api/goods/topClass",method:"post",data:t})}function i(t){return Object(s.b)({url:"/v1/api/goods/secondClass",method:"post",data:t})}function n(t){return Object(s.b)({url:"/v1/api/goods/add",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function l(t){return Object(s.b)({url:"/v1/api/goods/recycle/list",method:"post",data:t})}function c(t){return Object(s.b)({url:"/v1/api/goods/del",method:"post",data:{ids:t}})}function p(t){return Object(s.b)({url:"/v1/api/user/images/upload",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function u(){return Object(s.b)({url:"/v1/api/user/images/myImages",method:"post"})}function d(t){return Object(s.b)({url:"/v1/api/goods/recycle/clear",method:"post",data:{ids:t}})}function f(t){return Object(s.b)({url:"/v1/api/goods/recycle/recover",method:"post",data:{ids:t}})}},sTKi:function(t,e,a){"use strict";a.r(e);var s=[{prop:"cateName",name:"分类名称",type:"text",editable:!1,sortable:!1,width:.5*document.body.clientWidth-180},{prop:"goodsNum",name:"商品数量",type:"text",linkColor:"normal",editable:!1,sortable:!1,width:"auto"},{prop:"numUnit",name:"数量单位",type:"text",editable:!1,sortable:!1,width:"auto"},{prop:"priceGrade",name:"价格分级",type:"input",editable:!0,sortable:!1,width:"auto"},{prop:"sort",name:"排序",type:"input",editable:!0,sortable:!0,width:"auto"},{prop:"visible",name:"是否显示",type:"switch",editable:!1,sortable:!1,width:"auto"}],o=a("HGfo"),r=a("oU4k"),i={name:"GoodsCates",components:{goodsTableCustomTd:o.a},data:function(){return{tableData:[],tableSheme:s,goodsCateMapApi:{firstClass:r.g,secondClass:r.f}}},mounted:function(){var t=this;this.goodsCateMapApi.firstClass({classScheme:"cat1"}).then(function(e){200===e.status&&t.renderTable(e.data)})},methods:{renderTable:function(t){if(console.log(t),0!==t.length){var e=[];t.forEach(function(t){e.push({cateName:t.name,cateId:t.id,pId:t.pid?t.pid:-1,goodsNum:1,numUnit:"",priceGrade:0,sort:1,visible:!0,operate:""})}),this.tableData=e}else this.$message({type:"info",message:"此分类下数据为空！"})},getSubClass:function(t){var e=this;this.goodsCateMapApi.secondClass({topClass:[t.cateId]}).then(function(t){200===t.status&&e.renderTable(t.data)})},returnSupperClass:function(){console.log("返回上一级")}}},n=(a("Opjo"),a("KHd+")),l=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",{staticClass:"contentwrapper"},[a("div",[a("h3",{staticClass:"heading"},[t._v("商品分类\n      "),a("span",{staticStyle:{float:"right","margin-top":"-3px"}},[a("router-link",{attrs:{to:"/goodsCates/transferProds"}},[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){t.returnSupperClass()}}},[a("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),t._v("\n            上级分类\n          ")],1)],1),t._v(" "),a("router-link",{attrs:{to:"/goodsCates/goodsCateEdit"}},[a("el-button",{attrs:{type:"default",size:"mini"}},[a("font-awesome-icon",{attrs:{icon:["fas","plus"]}}),t._v("\n            添加商品分类\n          ")],1)],1)],1)])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-row-class-name":"py-table-header",stripe:""}},[t._l(t.tableSheme,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.name,sortable:e.sortable,width:e.width},scopedSlots:t._u([{key:"default",fn:function(s){return["cateName"===e.prop?a("span",[a("router-link",{attrs:{to:""},nativeOn:{click:function(e){t.getSubClass(s.row)}}},[a("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["far","minus-square"]}}),t._v(t._s(s.row[e.prop])+"\n          ")],1)],1):"cateName"!==e.prop?a("span",[a("goods-table-custom-td",{attrs:{prop:e.prop,name:e.name,"link-color":e.linkColor,type:e.type,data:s.row,"is-row-menu-wrap-cell":e.isRowMenuWrapCell||!1}})],1):t._e()]}}])})}),t._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{size:"medium",type:"text",title:"进入子分类"},on:{click:function(a){t.getSubClass(e.row)}}},[a("font-awesome-icon",{attrs:{icon:["fas","sign-in-alt"],size:"lg","fixed-width":""}})],1),t._v(" "),a("router-link",{attrs:{to:"/goodsCates/goodsCateEdit"}},[a("el-button",{attrs:{size:"medium",type:"text",title:"编辑"}},[a("font-awesome-icon",{attrs:{icon:["fas","edit"],size:"lg","fixed-width":""}})],1)],1),t._v(" "),a("el-button",{attrs:{size:"medium",type:"text",title:"删除"}},[a("font-awesome-icon",{staticClass:"py-text-danger",attrs:{icon:["fas","trash-alt"],size:"lg","fixed-width":""}})],1)],1)]}}])})],2),t._v(" "),a("router-view")],1)},[],!1,null,null,null);l.options.__file="goods-cates.vue";e.default=l.exports}}]);