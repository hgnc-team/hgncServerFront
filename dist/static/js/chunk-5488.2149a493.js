(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5488"],{"4AVS":function(e,t,a){"use strict";var s=a("Sl2t");a.n(s).a},"9G9v":function(e,t,a){"use strict";var s=a("oU4k"),i=a("t3Un"),l={name:"PicsManagement",props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{userId:this.$store.getters.id,picsManagementMapApi:{upload:s.j,query:s.d},imagesList:[],postUrl:i.a+"/user/images/upload"}},mounted:function(){this.visible=this.dialogVisible,this.refreshImageList()},methods:{togglePicsCenter:function(){this.$root.eventHub.$emit("togglePicsCenterEvent")},select:function(e){this.$root.eventHub.$emit("selectPicsCenterEvent",e)},refreshImageList:function(){var e=this;this.picsManagementMapApi.query().then(function(t){if(200===t.status){var a=[];t.data.forEach(function(t){a.push({id:t.id,url:"https://images.maiyidesan.cn/users/"+e.userId+"/"+t.path,fileName:t.path})}),e.imagesList=a}})},upload:function(e){var t=this,a=new FormData;a.append("images",e.file),this.picsManagementMapApi.upload(a).then(function(e){200===e.status&&(t.$message({type:"success",message:"图片上传成功！"}),t.refreshImageList())})}}},o=(a("ger1"),a("KHd+")),n=Object(o.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pics-manage-wrap"},[a("el-dialog",{attrs:{visible:e.dialogVisible,"show-close":!1,"append-to-body":!0,width:"1096px","custom-class":"pics-manage-compontent-dialog",title:""}},[a("el-container",{staticClass:"left-side",staticStyle:{height:"548px"}},[a("el-aside",{staticStyle:{"background-color":"#212121",position:"relative"},attrs:{width:"120px"}},[a("div",{staticClass:"title-wrap"},[a("h2",[e._v("素材中心")])]),e._v(" "),a("div",{staticClass:"left-side-inner"},[a("ul",{staticClass:"left-menu-wrap"},[a("li",{staticClass:"selected"},[a("span",[e._v("图片库")])])])]),e._v(" "),a("div",{staticClass:"upload-btn-wrap"},[a("el-upload",{staticClass:"upload-btn-inner",attrs:{action:e.postUrl,"http-request":e.upload}},[a("el-button",{attrs:{size:"mini"}},[a("font-awesome-icon",{attrs:{icon:["fas","cloud-upload-alt"]}}),e._v("\n              本地上传\n            ")],1)],1)],1)]),e._v(" "),a("el-container",{staticClass:"right-main"},[a("el-header",{staticClass:"category-hd-wrap",staticStyle:{height:"40px"}},[a("ul",{staticClass:"category"},[a("li",{staticClass:"item active"},[e._v("上传")])]),e._v(" "),a("div",{staticClass:"close pull-right",on:{click:function(t){e.togglePicsCenter()}}},[a("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)]),e._v(" "),a("el-main",{staticClass:"category-bd-wrap"},[a("ul",{staticClass:"images-list"},e._l(e.imagesList,function(t){return a("li",{key:t.id,staticClass:"image-item",on:{click:function(a){e.select(t)}}},[a("div",{staticClass:"cover",style:{"background-image":"url('"+t.url+"')"}},[a("div",{staticClass:"mask"}),e._v(" "),a("span",{staticClass:"icon preview",attrs:{"data-hint":"预览"}},[a("img",{directives:[{name:"preview",rawName:"v-preview",value:t.url,expression:"item.url"}],key:t.id,staticClass:"placeholder-img",attrs:{src:t.url,alt:t.url,"preview-title-enable":"true","preview-nav-enable":"true"}}),e._v(" "),a("font-awesome-icon",{attrs:{icon:["fas","eye"]}})],1)])])}))])],1)],1)],1)],1)},[],!1,null,null,null);n.options.__file="index.vue";t.a=n.exports},B7sB:function(e,t,a){},DaIU:function(e,t,a){"use strict";a.r(t);var s=a("jNkO"),i=a("oU4k"),l=a("9G9v"),o={name:"GoodsRepoAdd",components:{CateCasecader:s.a,PicsManagement:l.a},data:function(){return{visible:!1,prodRepoAddMapApi:{add:i.a},activeNames:[["1"],["1"],["1"],["1"]],form:{prodName:"",prodNo:"",price:0,marketPrice:0,weight:0,unit:"g",forSale:!1,selectedBrand:null,uploadFile:null,uploadFileThumb:null,uploadFileInstance:null,imageUrl:"",imageId:"",fileName:""},preSetData:{brandList:[{value:"0",label:"尤妮佳"},{value:"1",label:"香奈儿"},{value:"2",label:"SKII"},{value:"3",label:"华为"},{value:"4",label:"海尔"}]}}},mounted:function(){var e=this;this.$root.eventHub.$on("togglePicsCenterEvent",function(){e.visible=!e.visible}),this.$root.eventHub.$on("selectPicsCenterEvent",function(t){e.form.imageUrl=t.url,e.form.imageId=t.id,e.visible=!1})},methods:{togglePicsCenter:function(){this.$root.eventHub.$emit("togglePicsCenterEvent")},addProdToRepo:function(){var e=this,t=this.$store.state.user.selectedCateArr;this.prodRepoAddMapApi.add({title:this.form.prodName,type:t[t.length-1],price:this.form.price,pointRate:0,detail:"",titleImage:[this.form.imageId]}).then(function(t){200===t.status&&e.$message({type:"success",message:"添加商品成功！"})})}}},n=(a("mCSu"),a("KHd+")),r=Object(n.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"contentwrapper"},[a("el-main",[a("div",[a("h3",{staticClass:"heading"},[e._v("添加商品库商品\n        "),a("span",{staticStyle:{float:"right","margin-top":"-3px"}},[a("router-link",{attrs:{to:"/goodsRepo/list"}},[a("el-button",{attrs:{type:"default",size:"mini"}},[a("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),e._v("\n              返回商品列表\n            ")],1)],1)],1)])]),e._v(" "),a("el-form",{ref:"commonInfoForm",staticClass:"commonForm",attrs:{model:e.form,"label-position":"left","label-width":"100px;"}},[a("el-container",[a("el-main",{staticStyle:{padding:"20px"}},[a("el-form-item",{attrs:{label:"商品名称："}},[a("el-input",{model:{value:e.form.prodName,callback:function(t){e.$set(e.form,"prodName",t)},expression:"form.prodName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品货号："}},[a("el-input",{model:{value:e.form.prodNo,callback:function(t){e.$set(e.form,"prodNo",t)},expression:"form.prodNo"}}),e._v(" "),a("small",[e._v("\n              如果您不输入商品货号，系统将自动生成一个唯一的货号。\n            ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"本店售价："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),a("el-button",{staticClass:"inline-block right-beside-btn",attrs:{type:"default"}},[e._v("按市场价计算")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"市场售价："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{model:{value:e.form.marketPrice,callback:function(t){e.$set(e.form,"marketPrice",t)},expression:"form.marketPrice"}}),e._v(" "),a("el-button",{staticClass:"inline-block right-beside-btn",attrs:{type:"default"}},[e._v("取整数")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"商品重量："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticClass:"input-with-select",model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),e._v(" "),a("el-select",{staticClass:"right-beside-btn",attrs:{slot:"append",placeholder:"请选择单位"},slot:"append",model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},[a("el-option",{attrs:{label:"克",value:"g"}}),e._v(" "),a("el-option",{attrs:{label:"千克",value:"kg"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"上架："}},[a("el-checkbox",{model:{value:e.form.forSale,callback:function(t){e.$set(e.form,"forSale",t)},expression:"form.forSale"}},[e._v("\n              打勾表示商家可见此商品，并允许商家将此商品导入店铺，否则不显示并不可导入\n            ")])],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[0],callback:function(t){e.$set(e.activeNames,0,t)},expression:"activeNames[0]"}},[a("el-collapse-item",{attrs:{title:"SEO优化",name:"1"}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{model:{value:e.form.seoKeywords,callback:function(t){e.$set(e.form,"seoKeywords",t)},expression:"form.seoKeywords"}}),e._v(" "),a("small",[e._v("用英文逗号分隔")])],1),e._v(" "),a("el-form-item",{attrs:{label:"简单描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.seoDescrib,callback:function(t){e.$set(e.form,"seoDescrib",t)},expression:"form.seoDescrib"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addProdToRepo}},[e._v("下一步")])],1)],1),e._v(" "),a("el-aside",{staticStyle:{width:"350px"}},[a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[1],callback:function(t){e.$set(e.activeNames,1,t)},expression:"activeNames[1]"}},[a("el-collapse-item",{attrs:{title:"商品分类",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"选择商品分类"}},[a("cate-casecader")],1)],1)],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[2],callback:function(t){e.$set(e.activeNames,2,t)},expression:"activeNames[2]"}},[a("el-collapse-item",{attrs:{title:"商品品牌",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"选择商品品牌"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.selectedBrand,callback:function(t){e.$set(e.form,"selectedBrand",t)},expression:"form.selectedBrand"}},e._l(e.preSetData.brandList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[3],callback:function(t){e.$set(e.activeNames,3,t)},expression:"activeNames[3]"}},[a("el-collapse-item",{attrs:{title:"商品图片",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"上传商品图片"}},[a("div",{staticClass:"upload-pic-wrap",on:{click:function(t){e.togglePicsCenter()}}},[e.form.imageUrl?e._e():a("span",{staticClass:"add-icon"},[a("font-awesome-icon",{staticStyle:{"font-size":"45px","margin-top":"17px"},attrs:{icon:["fas","plus"]}})],1),e._v(" "),e.form.imageUrl?a("img",{attrs:{src:e.form.imageUrl}}):e._e()])]),e._v(" "),e.form.imageUrl?a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"商品缩略图"}},[a("div",{staticClass:"upload-pic-wrap",staticStyle:{width:"80px",height:"80px"},on:{click:function(t){e.togglePicsCenter()}}},[e.form.imageUrl?a("img",{attrs:{src:e.form.imageUrl}}):e._e()])]):e._e(),e._v(" "),a("small",[e._v("点击更换商品图片或商品缩略图")])],1)],1)],1)],1)],1)],1),e._v(" "),a("pics-management",{attrs:{"dialog-visible":e.visible}})],1)},[],!1,null,null,null);r.options.__file="goods-repo-add.vue";t.default=r.exports},Sl2t:function(e,t,a){},ger1:function(e,t,a){"use strict";var s=a("B7sB");a.n(s).a},jNkO:function(e,t,a){"use strict";var s=a("oU4k"),i={name:"CateCasecader",props:{size:{type:String,default:"medium"},placeholder:{type:String,default:"请选择"}},data:function(){return{firstClass:[],clearable:!1,props:{value:"id",children:"children",label:"name"},cateCasecaderMapApi:{firstClass:s.g,secondClass:s.f}}},mounted:function(){var e=this;this.clearable=this.$attrs.clearable,this.cateCasecaderMapApi.firstClass({classScheme:"cat1"}).then(function(t){if(200===t.status){var a=[];t.data.forEach(function(e){a.push({id:e.id,name:e.name,children:[]})}),e.firstClass=a}})},methods:{handleItemChange:function(e){var t=this;this.$store.commit("SET_SEL_CATE_ARR",e),this.cateCasecaderMapApi.secondClass({topClass:e}).then(function(e){200===e.status&&e.data.forEach(function(e){t.firstClass.forEach(function(t){e.pid===t.id&&t.children.push({id:e.id,name:e.name,children:null})})})})}}},l=(a("4AVS"),a("KHd+")),o=Object(l.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{},[t("el-cascader",{attrs:{clearable:this.clearable,options:this.firstClass,props:this.props,size:this.size,placeholder:this.placeholder},on:{"active-item-change":this.handleItemChange}})],1)},[],!1,null,null,null);o.options.__file="index.vue";t.a=o.exports},mCSu:function(e,t,a){"use strict";var s=a("pdph");a.n(s).a},oU4k:function(e,t,a){"use strict";a.d(t,"e",function(){return i}),a.d(t,"g",function(){return l}),a.d(t,"f",function(){return o}),a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"h",function(){return c}),a.d(t,"j",function(){return u}),a.d(t,"d",function(){return m}),a.d(t,"b",function(){return d}),a.d(t,"i",function(){return p});var s=a("t3Un");function i(e){return Object(s.b)({url:"/v1/api/goods/list",method:"post",data:e})}function l(e){return Object(s.b)({url:"/v1/api/goods/topClass",method:"post",data:e})}function o(e){return Object(s.b)({url:"/v1/api/goods/secondClass",method:"post",data:e})}function n(e){return Object(s.b)({url:"/v1/api/goods/create",method:"post",data:e})}function r(e){return Object(s.b)({url:"/v1/api/goods/recycle/list",method:"post",data:e})}function c(e){return Object(s.b)({url:"/v1/api/goods/del",method:"post",data:{ids:e}})}function u(e){return Object(s.b)({url:"/v1/api/user/images/upload",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function m(){return Object(s.b)({url:"/v1/api/user/images/myImages",method:"post"})}function d(e){return Object(s.b)({url:"/v1/api/goods/recycle/clear",method:"post",data:{ids:e}})}function p(e){return Object(s.b)({url:"/v1/api/goods/recycle/recover",method:"post",data:{ids:e}})}},pdph:function(e,t,a){}}]);